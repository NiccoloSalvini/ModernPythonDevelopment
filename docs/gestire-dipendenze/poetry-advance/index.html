<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.82.0" />
    <meta name="description" content="Python Biella Group Reference Website and Guides">
<meta name="author" content="Andrea Guzzo">

    <link rel="shortcut icon" href="/static/images/PythonGroupBiella-iconOnly.png" type="image/x-icon" />
    <title>Poetry Advance :: Python Biella Group Learning Page</title>

    
    <link href="/ModernPythonDevelopment/css/nucleus.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/fontawesome-all.min.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/hybrid.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/featherlight.min.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/perfect-scrollbar.min.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/auto-complete.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/atom-one-dark-reasonable.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/theme.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/tabs.css?1619014998" rel="stylesheet">
    <link href="/ModernPythonDevelopment/css/hugo-theme.css?1619014998" rel="stylesheet">
    
    <link href="/ModernPythonDevelopment/css/theme-blue.css?1619014998" rel="stylesheet">
    
    

    <script src="/ModernPythonDevelopment/js/jquery-3.3.1.min.js?1619014998"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/ModernPythonDevelopment/gestire-dipendenze/poetry-advance/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <img src="pbg-logo.png" alt="PBGLogo" width="130" height="100">

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/ModernPythonDevelopment/js/lunr.min.js?1619014998"></script>
<script type="text/javascript" src="/ModernPythonDevelopment/js/auto-complete.js?1619014998"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/pythonbiellagroup.github.io\/ModernPythonDevelopment\/";
    
</script>
<script type="text/javascript" src="/ModernPythonDevelopment/js/search.js?1619014998"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Redirect to Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/ModernPythonDevelopment/gestire-python/" title="Gestire Versioni di Python" class="dd-item
        
        
        
        ">
      <a href="/ModernPythonDevelopment/gestire-python/">
          <b>1. </b>Gestire Versioni di Python
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/gestire-python/pyenv/" title="Pyenv" class="dd-item ">
        <a href="/ModernPythonDevelopment/gestire-python/pyenv/">
        Pyenv
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/gestire-python/pyenv-advance/" title="Pyenv avanzato" class="dd-item ">
        <a href="/ModernPythonDevelopment/gestire-python/pyenv-advance/">
        Pyenv avanzato
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ModernPythonDevelopment/gestire-dipendenze/" title="Gestire Dipendenze" class="dd-item
        parent
        
        
        ">
      <a href="/ModernPythonDevelopment/gestire-dipendenze/">
          <b>2. </b>Gestire Dipendenze
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/gestire-dipendenze/virtualenv/" title="Virtualenv" class="dd-item ">
        <a href="/ModernPythonDevelopment/gestire-dipendenze/virtualenv/">
        <b>2.1 </b>Virtualenv
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/gestire-dipendenze/pyenv-virtualenv/" title="Pyenv-virtualenv" class="dd-item ">
        <a href="/ModernPythonDevelopment/gestire-dipendenze/pyenv-virtualenv/">
        Pyenv-virtualenv
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/gestire-dipendenze/poetry/" title="Poetry" class="dd-item ">
        <a href="/ModernPythonDevelopment/gestire-dipendenze/poetry/">
        Poetry
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/gestire-dipendenze/poetry-advance/" title="Poetry Advance" class="dd-item active">
        <a href="/ModernPythonDevelopment/gestire-dipendenze/poetry-advance/">
        Poetry Advance
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/gestire-dipendenze/pipx/" title="Pipx" class="dd-item ">
        <a href="/ModernPythonDevelopment/gestire-dipendenze/pipx/">
        Pipx
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ModernPythonDevelopment/struttura-progetto/" title="Struttura di progetto" class="dd-item
        
        
        
        ">
      <a href="/ModernPythonDevelopment/struttura-progetto/">
          <b>3. </b>Struttura di progetto
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/struttura-progetto/import-relativi/" title="Import relativi" class="dd-item ">
        <a href="/ModernPythonDevelopment/struttura-progetto/import-relativi/">
        Import relativi
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/struttura-progetto/import-circolari/" title="Import circolari" class="dd-item ">
        <a href="/ModernPythonDevelopment/struttura-progetto/import-circolari/">
        Import circolari
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/struttura-progetto/cookiecutter/" title="cookiecutter" class="dd-item ">
        <a href="/ModernPythonDevelopment/struttura-progetto/cookiecutter/">
        cookiecutter
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ModernPythonDevelopment/code-style/" title="Code Style" class="dd-item
        
        
        
        ">
      <a href="/ModernPythonDevelopment/code-style/">
          <b>4. </b>Code Style
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/code-style/black/" title="Black" class="dd-item ">
        <a href="/ModernPythonDevelopment/code-style/black/">
        <b>4.1 </b>Black
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/code-style/flake8/flake8/" title="Flake8" class="dd-item ">
        <a href="/ModernPythonDevelopment/code-style/flake8/flake8/">
        <b>4.2 </b>Flake8
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/code-style/bandit/" title="Bandit" class="dd-item ">
        <a href="/ModernPythonDevelopment/code-style/bandit/">
        <b>4.3 </b>Bandit
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ModernPythonDevelopment/visual-studio-code/" title="Visual Studio Code" class="dd-item
        
        
        
        ">
      <a href="/ModernPythonDevelopment/visual-studio-code/">
          <b>5. </b>Visual Studio Code
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/visual-studio-code/linter/" title="Installare un linter" class="dd-item ">
        <a href="/ModernPythonDevelopment/visual-studio-code/linter/">
        Installare un linter
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/visual-studio-code/python-version/" title="Utilizzare una versione di Python" class="dd-item ">
        <a href="/ModernPythonDevelopment/visual-studio-code/python-version/">
        Utilizzare una versione di Python
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/visual-studio-code/code-terminal/" title="Aggiungere code al terminale" class="dd-item ">
        <a href="/ModernPythonDevelopment/visual-studio-code/code-terminal/">
        Aggiungere code al terminale
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/visual-studio-code/debugger/" title="Usare il debugger" class="dd-item ">
        <a href="/ModernPythonDevelopment/visual-studio-code/debugger/">
        Usare il debugger
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ModernPythonDevelopment/visual-studio-code/testing/" title="Testing" class="dd-item ">
        <a href="/ModernPythonDevelopment/visual-studio-code/testing/">
        Testing
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ModernPythonDevelopment/repl/" title="REPL" class="dd-item
        
        
        
        ">
      <a href="/ModernPythonDevelopment/repl/">
          <b>6. </b>REPL
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ModernPythonDevelopment/materiale-utile/" title="Materiale utile" class="dd-item
        
        
        
        ">
      <a href="/ModernPythonDevelopment/materiale-utile/">
          <b>X. </b>Materiale utile
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://pythonbiellagroup.github.io/ModernPythonDevelopment/tags"><i class='fas fa-tags'></i> Tags</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <center>
    
    <a class="github-button" href="https://github.com/PythonBiellaGroup" data-icon="octicon-star" data-show-count="true" aria-label="Star pocc/tshark.dev on GitHub">Github</a>

    <p>Built with <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/matcornic/hugo-theme-learn">Learn</a></p>
    <p>Copyright 2020, <a href="https://swit.sh">PythonBiellaGroup</a></p>
</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/PythonBiellaGroup/ModernPythonDevelopment/tree/master/contentgestire-dipendenze/poetry%20advance.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/ModernPythonDevelopment/'>ModernPythonDevelopment</a> > <a href='/ModernPythonDevelopment/gestire-dipendenze/'>Gestire Dipendenze</a> > Poetry Advance
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#installare-poetry-e-includere-linstallazione"><strong>Installare poetry e includere l&rsquo;installazione</strong></a></li>
    <li><a href="#creare-un-progetto-python-utilizzando-poetry">Creare un progetto python utilizzando Poetry</a></li>
    <li><a href="#installare-e-gestire-le-dipendenze"><strong>Installare e gestire le dipendenze</strong></a></li>
    <li><a href="#configurazioni"><strong>Configurazioni</strong></a></li>
    <li><a href="#esecuzione-dellapplicazione"><strong>Esecuzione dell&rsquo;applicazione</strong></a></li>
    <li><a href="#buildare-e-pubblicare-il-pacchetto-progetto"><strong>Buildare e pubblicare il pacchetto (progetto)</strong></a></li>
    <li><a href="#poetry-getting-started">Poetry Getting Started</a></li>
    <li><a href="#aggiungere-poetry-ad-un-progetto-esistente-con-dei-requirementstxt">Aggiungere poetry ad un progetto esistente (con dei requirements.txt)</a></li>
    <li><a href="#poetry-in-vscode"><strong>Poetry in VSCode</strong></a></li>
    <li><a href="#un-esempio-di-pyprojecttoml">Un esempio di Pyproject.toml</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Poetry Advance
            </h1>
          

        


<p>Poetry è il più sofisticato sistema di gestione delle dipendenze su Python disponibile (nel 2020).</p>
<p>Consente di andare al di là della semplice gestione delle dipendenze, con funzioni come: generare .lock files, consentire di fare scaffolding dei progetti con molte possibilità di personalizzazione, il tutto disponibile via CLI.</p>
<h2 id="installare-poetry-e-includere-linstallazione"><strong>Installare poetry e includere l&rsquo;installazione</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py <span class="p">|</span> python3

<span class="c1">#aggiungere poetry alle variabili di ambiente della sessione shell corrente</span>
<span class="nb">source</span> <span class="nv">$HOME</span>/.poetry/env

<span class="c1">#controllare se poetry è installato correttamente</span>
poetry --version
</code></pre></div><p>Per installare poetry usando windows è possibile lanciare lo stesso comando usando la <code>git bash</code> in modo da poter usare il comando <code>curl</code> (attenzione: conviene utilizzare git bash come amministratore)</p>
<p><a href="http://evaholmes.com/how-to-set-up-pyenv-and-poetry-on-windows-10-for-python-project-management/">http://evaholmes.com/how-to-set-up-pyenv-and-poetry-on-windows-10-for-python-project-management/</a></p>
<p>Dopo l&rsquo;installazione aggiungete la seguente variabile d&rsquo;ambiente nelle variabili di percorso all&rsquo;interno delle variabili di sistema</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#sostituite &lt;nomeutente&gt; con il vostro utente</span>
C:<span class="se">\U</span>sers<span class="se">\&lt;</span>nomeutente&gt;<span class="se">\.</span>poetry<span class="se">\b</span>in

</code></pre></div><p>Su windows è possibile anche usare lo script di installazione di powershell</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">(</span>Invoke-WebRequest -Uri https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py -UseBasicParsing<span class="o">)</span>.Content <span class="p">|</span> python -
</code></pre></div><p>Per controllare la versione corrente di poetry installata nel sistema è possibile fare:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">poetry --version
</code></pre></div><p>Di default poetry è installato nella home directory specifica del vostro utente. Se si desidera cambiare l&rsquo;impostazione è possibile definire la seguente variabile d&rsquo;ambiente <code>POETRY-HOME</code></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">POETRY_HOME</span><span class="o">=</span>/etc/poetry python <span class="o">[</span>get-poetry.py<span class="o">](</span>http://get-poetry.py/<span class="o">)</span>
</code></pre></div><p>È anche possibile installare Poetry con <code>pip</code> o con <code>pipx</code></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Install poetry with pip</span>
pip install --user poetry

<span class="c1"># Install poetry with pipx</span>
pipx install poetry

<span class="c1"># Upgrade poetry with pipx</span>
pipx upgrade poetry

<span class="c1"># Uninstall poetry with pipx</span>
pipx uninstall poetry

</code></pre></div><h2 id="creare-un-progetto-python-utilizzando-poetry">Creare un progetto python utilizzando Poetry</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">poetry new poetry-tutorial-project
</code></pre></div><p>La ricetta segreta di ogni progetto costruito con poetry è la creazione di un file chiamato <code>pyproject.toml</code> . All&rsquo;interno di questo file è possibile definire tutto quello che esiste all&rsquo;interno del progetto: metadati, dipendenze, librerie, scripts e molto altro&hellip;</p>
<p>Se siete a vostro agio con node.js possiamo considerare il file pyproject.toml come un package.json del progetto.</p>
<p><strong>Composizione di poetry (file toml)</strong></p>
<p>Documentazione: <a href="https://python-poetry.org/docs/pyproject/">https://python-poetry.org/docs/pyproject/</a></p>
<ul>
<li><em>[tool.poetry]</em> = semplice metadato informativo riguardo al package che state sviluppando (come il package name, descrizione, autore, dettagli, &hellip;). Alcune impostazioni sono utili solamente se pensate di pubblicare il vostro pacchetto su Pypi.</li>
<li><em>[tool.poetry.dependencies]</em> = Consente di definire le dipendenze dell&rsquo;applicazione che sono assolutamente necessarie per lanciare il vostro programma. È anche possibile impostare una versione particolare del pacchetto che volete installare (such as Flask = &ldquo;1.0.0&rdquo;), Se invece si vuole semplicemente definire l&rsquo;ultima versione è possibile inserire solamente &ldquo;*&rdquo;. È anche possibile specificare la versione di Python richiesta per lanciare il progetto e la vostra applicazione.</li>
<li><em>[tool.poetry.dev-dependencies]</em> = Le Dev dependencies sono tutte le librerie che servono agli sviluppatori per costruire e programmare il progetto, ma che non devono essere portare in produzione. Queste dipendenze non servono per lanciare l&rsquo;applicazione e non verranno scaricate se l&rsquo;applicazione viene &ldquo;buildata&rdquo; di default.</li>
<li><em>[build-system]</em> = Questa sezione è raramente utilizzata, modificatela solamente se avete intenzione di aggiornare Poetry.</li>
<li><em>[tool.poetry.scripts]</em> = Qui è dove si specificano gli entry point dell&rsquo;applicazione, assegnando una funzione all&rsquo;interno dei moduli necessaria a lanciare l&rsquo;applicazione. L&rsquo;esempio utilizza: run = &ldquo;wsgi:main&rdquo; che specifica che vogliamo creare un comando &ldquo;run&rdquo; che cercherà all&rsquo;interno del file: &ldquo;<a href="http://wsgi.py/">wsgi.py</a>&rdquo; una funzione chiamata: main(). Con questa impostazione è possibile lanciare l&rsquo;applicazione utilizzando la CLI scrivendo: <em><code>poetry run</code></em></li>
<li><em>[tool.poetry.urls]</em>: Questa impostazione è opzionale e può essere utilizzata per inserire link utili di risorse, documentazione o altro legato al progetto e importanti se volete rilasciare il vostro pacchetto.</li>
</ul>
<h2 id="installare-e-gestire-le-dipendenze"><strong>Installare e gestire le dipendenze</strong></h2>
<p><strong><code>poetry shell</code></strong></p>
<p>La prima volta che questo comando viene eseguito nella directory del tuo progetto, Poetry crea un ambiente virtuale Python che sarà per sempre associato a questo progetto. Invece di creare una cartella contenente le tue librerie di dipendenza (come fa virtualenv), Poetry crea un ambiente su un percorso di sistema globale, separando così il codice sorgente di dipendenza dal tuo progetto. Una volta che questo ambiente virtuale è creato, può essere attivato di nuovo in qualsiasi momento semplicemente eseguendo poetry shell nella directory del tuo progetto in futuro. Prova a confrontare l&rsquo;output di python prima e dopo aver attivato la shell del tuo progetto per vedere come Poetry gestisce gli ambienti virtuali.</p>
<p><code>**poetry install**</code></p>
<p>Installa le dipendenze specificate in pyproject.toml. La prima volta che le dipendenze di un progetto vengono installate, viene creato un file .lock, che contiene i numeri di versione effettivi di ogni pacchetto che è stato installato (ad esempio: se Flask = &ldquo;*&rdquo; ha portato a scaricare Flask versione 1.0.0, il numero di versione effettivo verrebbe memorizzato in .lock). Se è presente un file .lock, i numeri di versione in .lock avranno sempre la priorità su quelli presenti in pyproject.toml.</p>
<p><code>**poetry update**</code></p>
<p>Imita la funzionalità di install, con l&rsquo;eccezione che i numeri di versione in .lock NON saranno rispettati. Se esistono versioni più recenti per i pacchetti in pyproject.toml, saranno installate le versioni più recenti e .lock sarà aggiornato di conseguenza.</p>
<p><code>**poetry add [package-name]**</code></p>
<p>Una scorciatoia per aggiungere una dipendenza a pyproject.toml. Il pacchetto viene installato immediatamente dopo essere stato aggiunto.</p>
<p><code>**poetry remove [package-name]</code>**</p>
<p>Comando per rimuovere una determinata dipendenza dalla lista delle dipendenze del progetto definite nel pyproject.toml</p>
<p><code>**poetry export -f requirements.txt &gt; requirements.txt</code>**</p>
<p>Esporta il contenuto del file .lock del tuo progetto in requirements.txt. È utile quando si passa il lavoro a sviluppatori che usano ancora requirements.txt per qualche motivo.</p>
<p>È anche possibile eseguire il seguente comando: <code>poetry export -f requirements.txt --output reqtest.txt --without-hashes</code> che consente di esportare le dipendenze in un file con un nome diverso (reqtest.txt) e senza gli hash che codificano i pacchetti. Questo comando può essere utile se con il comando normale ci sono dei problemi nell&rsquo;installazione dei requirements.txt</p>
<p><code>**poetry env list --full-path</code>**</p>
<p>Visualizzare il percorso e l&rsquo;elenco dell&rsquo;ambiente.</p>
<h2 id="configurazioni"><strong>Configurazioni</strong></h2>
<p><code>**poetry config**</code></p>
<p>&ldquo;Config&rdquo; si riferisce alla configurazione a livello di ambiente, come i percorsi dell&rsquo;ambiente virtuale corrente o le variabili di ambiente. Passando l&rsquo;opzione &ndash;list restituirà gli attuali valori di configurazione del tuo ambiente.</p>
<p><code>**poetry check**</code></p>
<p>Consente di controllare il file pyproject.toml per eventuali errori</p>
<p><code>**poetry show**</code></p>
<p>Restituisce una ripartizione di tutti i pacchetti attualmente installati nel progetto, comprese le dipendenze delle dipendenze.</p>
<h2 id="esecuzione-dellapplicazione"><strong>Esecuzione dell&rsquo;applicazione</strong></h2>
<p><code>**poetry run [script-name]**</code></p>
<p>Esegue lo script definito all&rsquo;interno della sezione: [tool.poetry.scripts] del pyproject.toml</p>
<h2 id="buildare-e-pubblicare-il-pacchetto-progetto"><strong>Buildare e pubblicare il pacchetto (progetto)</strong></h2>
<p><code>**poetry build**</code></p>
<p>Consente di creare una build del codice sorgente e dell&rsquo;archivio wheels</p>
<p><code>**poetry publish**</code></p>
<p>Pubblica l&rsquo;output della build all&rsquo;interno di una repository esterna (come ad esempio Pypi)</p>
<h2 id="poetry-getting-started">Poetry Getting Started</h2>
<p>Vediamo adesso come fare per inizializzare poetry all&rsquo;interno di un nuovo progetto</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">##Inizializziamo poetry all&#39;interno di una cartella</span>
poetry init

<span class="c1">#Oppure creiamo un nuovo progetto (crea anche una sotto cartella)</span>
poetry new &lt;app_name&gt;

<span class="c1">## Ora potete modificare il file: pyproject.toml come volete</span>

<span class="c1">#Se volete creare la cartella .venv all&#39;interno del progetto fate:</span>
poetry config virtualenvs.in-project <span class="nb">true</span>

<span class="c1">#Ora occore compilare poetry per creare il venv</span>
<span class="c1">#E lanciare la shell con il venv che avete definito</span>
poetry shell

<span class="c1">#Se necessario aggiornare pip</span>
python -m pip install --upgrade pip
<span class="c1"># Questo può essere necessario se compaiono degli errori nell&#39;installazione delle dipendenze</span>

<span class="c1">#Aggiungere una dipendenza e installarla</span>
poetry add pandas

<span class="c1">#Aggiungere una dipendenza di sviluppo e installarla</span>
poetry add -D flake8

<span class="c1">#Se avete definito le librerie all&#39;interno del pyproject.toml</span>
<span class="c1">#È possibile installarle lanciando questo comando</span>
poetry install

<span class="c1">#Per lanciare un file definito nel pyproject.toml</span>
poetry run &lt;script&gt;

<span class="c1">#Visualizzare il path del virtual env all&#39;interno del progetto (o fuori)</span>
<span class="c1">#Con anche la lista delle librerie installate</span>
poetry show -v

<span class="c1"># È sempre possibile visualizzare la versione di default di python in uso correntemente</span>
which python

<span class="c1">#Per uscire dalla shell di poetry e dall&#39;ambiente creato</span>
<span class="nb">exit</span>

<span class="c1">#Rimuovere un ambiente virtuale (venv) utilizzanto poetry</span>
poetry env remove &lt;python&gt;
</code></pre></div><h2 id="aggiungere-poetry-ad-un-progetto-esistente-con-dei-requirementstxt">Aggiungere poetry ad un progetto esistente (con dei requirements.txt)</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">
<span class="c1">#inizializzare poetry all&#39;interno di una directory</span>
poetry init

<span class="c1">#compilare le informazioni all&#39;interno del pyproject.toml</span>

<span class="c1">#Se si vuole utilizzare un virtual env all&#39;interno del progetto fare:</span>
poetry config virtualenvs.in-project <span class="nb">true</span>

<span class="c1">## Importare i requirements.txt (librerie) all&#39;interno di poetry</span>
cat requirements.txt<span class="p">|</span>xargs poetry add
<span class="c1"># Non è &#34;bellissimo&#34; e potrebbe non funzionare</span>
</code></pre></div><p><strong>Generare da poetry un file: requirements.txt</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">poetry <span class="nb">export</span> -f requirements.txt &gt; requirements.txt

<span class="c1">#Un esempio più completo</span>
poetry <span class="nb">export</span> -f requirements.txt --output reqtest.txt --without-hashes
<span class="c1">#crea un file: reqtest.txt differente</span>
<span class="c1">#senza gli hash (ovvero senza la firma delle librerie) </span>
<span class="c1">#è meno safe perchè con gli hash pip potrebbe avere problemi nell&#39;installazione</span>
</code></pre></div><p>Attenzione può accadere in alcune situazioni di dover aggiornare pip per installare alcune librerie, per farlo una volta creato e attivato il vostro virtualenvironment con python fare:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#Aggiornare pip</span>
python -m pip install --upgrade pip
</code></pre></div><h2 id="poetry-in-vscode"><strong>Poetry in VSCode</strong></h2>
<p>Poetry non è ancora integrato all&rsquo;interno di vscode e nell&rsquo;estensione ufficiale di Python, quindi per utilizzarlo con vscode è necessario configurarlo manualmente.</p>
<p>Per consentire al progetto di utilizzare l&rsquo;ambiente virtuale del progetto è necessario definire un file inserendo il path di riferimento dell&rsquo;ambiente virtuale creato con poetry</p>
<ul>
<li>lanciare nel terminale: <code>**poetry env list --full-path</code>** e copiare il path che si riferisce all&rsquo;ambiente virtuale (venv) di poetry</li>
<li>All&rsquo;interno del progetto creare una nuova cartella chiamata: .vscode</li>
<li>All&rsquo;interno della cartella creare un file chiamato: <code>settings.json</code></li>
<li>Inserire nel file la seguente configurazione</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">{</span>
    <span class="s2">&#34;python.pythonPath&#34;</span>: <span class="s2">&#34;&lt;path dell&#39;ambiente venv copiato&gt;&#34;</span>
<span class="o">}</span>
</code></pre></div><ul>
<li>Rilanciare vscode e in automatico quando aprirete un file .py verrà utilizzata la versione di Python che avete creato con Poetry</li>
</ul>
<p>Ricordarsi sempre di lanciare nel terminale: <code>poetry shell</code> per lanciare l&rsquo;ambiente</p>
<p>Ricordarsi di non pushare sulla vostra repository git remota le configurazioni di vscode appena create per non sovrascrivere quelle dei colleghi (inserite la cartella .vscode nel file <code>gitignore</code>)</p>
<p>Un altro metodo</p>
<p>Lanciare il progetto da terminale</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#dire a poetry di generare in locale il virtualenv</span>
poetry config virtualenvs.in-project <span class="nb">true</span> --local
poetry config virtualenvs.create <span class="nb">true</span> --local
poetry config settings.virtualenvs.in-project <span class="nb">true</span>

<span class="c1">#quindi lanciare</span>
poetry install
</code></pre></div><p>In questo modo generete un cartella chiamata: virtualenv all&rsquo;interno del progetto, in questo modo vscode capirà che questo è il default virtualenv da utilizzare invece di quello globale</p>
<p>Se si vuole fermare l&rsquo;utilizzo del .venv all&rsquo;interno del progetto è possibile fare:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#tell poetry not to use venv inside the proj folder</span>
poetry config virtualenvs.in-project <span class="nb">false</span> --local
poetry config virtualenvs.create <span class="nb">false</span> --local
poetry config settings.virtualenvs.in-project <span class="nb">false</span>
</code></pre></div><h2 id="un-esempio-di-pyprojecttoml">Un esempio di Pyproject.toml</h2>
<p>Ecco un esempio di file pyproject.toml che potete utilizzare sui vostri progetti (ovviamente con gli opportuni cambiamenti e personalizzazioni)</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>tool.poetry<span class="o">]</span>
<span class="nv">name</span> <span class="o">=</span> <span class="s2">&#34;poetry-tutorial-project&#34;</span>
<span class="nv">version</span> <span class="o">=</span> <span class="s2">&#34;0.1.0&#34;</span>
<span class="nv">description</span> <span class="o">=</span> <span class="s2">&#34;Simple python project built with poetry&#34;</span>
<span class="nv">authors</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;Andrea Guzzo &lt;andrea.guzzo92@gmail.com&gt;&#34;</span><span class="o">]</span>
<span class="nv">maintainers</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;Andrea Guzzo &lt;andrea.guzzo92@gmail.com&gt;&#34;</span><span class="o">]</span>
<span class="nv">license</span> <span class="o">=</span> <span class="s2">&#34;MIT&#34;</span>
<span class="nv">readme</span> <span class="o">=</span> <span class="s2">&#34;README.md&#34;</span>
<span class="nv">homepage</span> <span class="o">=</span> <span class="s2">&#34;http://localhost:5000&#34;</span>
<span class="nv">repository</span> <span class="o">=</span> <span class="s2">&#34;https://github.com/jeydi/&#34;</span>
<span class="nv">documentation</span> <span class="o">=</span> <span class="s2">&#34;https://github.com/jeydi/&#34;</span>
<span class="nv">keywords</span> <span class="o">=</span> <span class="o">[</span>
	<span class="s2">&#34;Poetry&#34;</span>,
	<span class="s2">&#34;Venv&#34;</span>,
	<span class="s2">&#34;Virtual enviroments&#34;</span>,
	<span class="s2">&#34;Packages&#34;</span>,
	<span class="s2">&#34;Packaging&#34;</span>
<span class="o">]</span>

<span class="o">[</span>tool.poetry.dependencies<span class="o">]</span>
<span class="nv">python</span> <span class="o">=</span> <span class="s2">&#34;^3.7&#34;</span>
<span class="nv">loguru</span> <span class="o">=</span> <span class="s2">&#34;*&#34;</span>
<span class="nv">psutil</span> <span class="o">=</span> <span class="s2">&#34;*&#34;</span>
<span class="nv">pandas</span> <span class="o">=</span> <span class="s2">&#34;*&#34;</span>
<span class="nv">numpy</span> <span class="o">=</span> <span class="s2">&#34;*&#34;</span>
<span class="nv">fastapi</span> <span class="o">=</span> <span class="s2">&#34;*&#34;</span>
<span class="nv">typer</span> <span class="o">=</span> <span class="s2">&#34;^0.3.2&#34;</span>

<span class="o">[</span>tool.poetry.dev-dependencies<span class="o">]</span>
<span class="nv">pytest</span> <span class="o">=</span> <span class="s2">&#34;^5.2&#34;</span>

<span class="o">[</span>build-system<span class="o">]</span>
<span class="nv">requires</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;poetry-core&gt;=1.0.0&#34;</span><span class="o">]</span>
build-backend <span class="o">=</span> <span class="s2">&#34;poetry.core.masonry.api&#34;</span>

<span class="o">[</span>tool.poetry.scripts<span class="o">]</span>
<span class="nv">run</span> <span class="o">=</span> <span class="s2">&#34;wsgi:main&#34;</span>

<span class="o">[</span>tool.poetry.urls<span class="o">]</span>
<span class="nv">issues</span> <span class="o">=</span> <span class="s2">&#34;https://github.com/jeydi/&#34;</span>
</code></pre></div><h1 id="aggiornare-poetry">Aggiornare poetry</h1>
<p>Aggiornare poetry all&rsquo;ultima versione stabile è semplice</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#Aggiornare poetry all&#39;ultima versione stabile</span>
poetry self update

<span class="c1">#Lanciare questo comando se invece volete installare la preview di poetry</span>
poetry self update --preview
</code></pre></div><h1 id="cancella-poetry">Cancella poetry</h1>
<p>Per cancellare e rimuovere poetry è possibile eseguire questi comandi</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#Uninstall poetry</span>
python get-poetry.py --uninstall

<span class="c1"># Another method (optional)</span>
<span class="c1"># Setting the POETRY_UNINSTALL env variable befor executing the installer</span>
<span class="nv">POETRY_UNINSTALL</span><span class="o">=</span><span class="m">1</span> python get-poetry.py
</code></pre></div><h1 id="abilitare-il-completamento-per-bash-o-zsh">Abilitare il completamento per bash o zsh</h1>
<p>Poetry supporta il completamento automatico da terminale per diverse CLI come: bash, zsh o fish.</p>
<p>Se volete avere ulteriori dettagli su queste funzionalità potete lanciare: <code>poetry help completions</code></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">poetry completions bash &gt; /etc/bash_completion.d/poetry.bash-completion

<span class="c1"># Bash (Homebrew)</span>
poetry completions bash &gt; <span class="k">$(</span>brew --prefix<span class="k">)</span>/etc/bash_completion.d/poetry.bash-completion

<span class="c1"># Zsh</span>
poetry completions zsh &gt; ~/.zfunc/_poetry

<span class="c1"># Oh-My-Zsh</span>
mkdir <span class="nv">$ZSH_CUSTOM</span>/plugins/poetry
poetry completions zsh &gt; <span class="nv">$ZSH_CUSTOM</span>/plugins/poetry/_poetry
</code></pre></div><p>Dovrete riavviare la shell per poter vedere le modifiche</p>
<p>Attenzione (alcuni dettagli):</p>
<p>For <code>zsh</code> you must add the following line into <code>~/.zshrc</code> profile before <code>compinit</code></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">fpath</span><span class="o">+=</span>~/.zfunc
</code></pre></div><p>For <code>oh-my-zsh</code> you must then enable poetry in your <code>~/.zshrc</code> plugin</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">plugins<span class="o">(</span>
    poetry
    ...
    <span class="o">)</span>
</code></pre></div><h1 id="deploy">Deploy</h1>
<p>Come utilizzare poetry con Docker in fase di deploy?</p>
<p>Ecco alcuni link interessanti</p>
<ul>
<li><a href="https://medium.com/@harpalsahota/dockerizing-python-poetry-applications-1aa3acb76287">https://medium.com/@harpalsahota/dockerizing-python-poetry-applications-1aa3acb76287</a></li>
<li>docker caching: <a href="https://pythonspeed.com/articles/poetry-vs-docker-caching/">https://pythonspeed.com/articles/poetry-vs-docker-caching/</a></li>
<li>Production Ready Docker packaging for python developers: <a href="https://pythonspeed.com/docker/#articles-the-basics-of-docker-packaging">https://pythonspeed.com/docker/#articles-the-basics-of-docker-packaging</a></li>
</ul>
<h1 id="documentazione-e-link-utili">Documentazione e link utili</h1>
<p>Documentazione ufficiale (fatta molto bene) <strong>:</strong> <a href="https://python-poetry.org/docs/basic-usage/">https://python-poetry.org/docs/basic-usage/</a></p>
<p><a href="https://hackersandslackers.com/python-poetry-package-manager/">https://hackersandslackers.com/python-poetry-package-manager/</a></p>
<p><a href="https://www.youtube.com/watch?v=QX_Nhu1zhlg&amp;ab_channel=PyGotham2019">https://www.youtube.com/watch?v=QX_Nhu1zhlg&amp;ab_channel=PyGotham2019</a></p>
<p>Build CLI Utilities with Poetry and Typer: <a href="https://www.pluralsight.com/tech-blog/python-cli-utilities-with-poetry-and-typer/">https://www.pluralsight.com/tech-blog/python-cli-utilities-with-poetry-and-typer/</a></p>
<p>Confronto con altre librerie: <a href="https://towardsdatascience.com/devops-for-data-science-making-your-python-project-reproducible-f55646e110fa">https://towardsdatascience.com/devops-for-data-science-making-your-python-project-reproducible-f55646e110fa</a></p>
<p>Use Poetry in Production (with Docker): <a href="https://stackoverflow.com/questions/53835198/integrating-python-poetry-with-docker">https://stackoverflow.com/questions/53835198/integrating-python-poetry-with-docker</a></p>
<p>Data Science PRO with Poetry + Jupyter + VSCode: <a href="https://medium.com/analytics-vidhya/setting-up-data-science-python-projects-with-vscode-poetry-jupyter-b96efeea24c8">https://medium.com/analytics-vidhya/setting-up-data-science-python-projects-with-vscode-poetry-jupyter-b96efeea24c8</a></p>
<p>Poetry Configure Workspace:</p>
<p><a href="https://zhauniarovich.com/post/2020/2020-02-configuring-python-workspace-p2/">https://zhauniarovich.com/post/2020/2020-02-configuring-python-workspace-p2/</a></p>
<p><strong>To solve problems with psycopg2 and Python</strong></p>
<p><a href="https://blog.vince.id/installing-psycopg2-on-macos">https://blog.vince.id/installing-psycopg2-on-macos</a></p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/ModernPythonDevelopment/gestire-dipendenze/poetry/" title="Poetry"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/ModernPythonDevelopment/gestire-dipendenze/pipx/" title="Pipx" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/ModernPythonDevelopment/js/clipboard.min.js?1619014998"></script>
    <script src="/ModernPythonDevelopment/js/perfect-scrollbar.min.js?1619014998"></script>
    <script src="/ModernPythonDevelopment/js/perfect-scrollbar.jquery.min.js?1619014998"></script>
    <script src="/ModernPythonDevelopment/js/jquery.sticky.js?1619014998"></script>
    <script src="/ModernPythonDevelopment/js/featherlight.min.js?1619014998"></script>
    <script src="/ModernPythonDevelopment/js/highlight.pack.js?1619014998"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/ModernPythonDevelopment/js/modernizr.custom-3.6.0.js?1619014998"></script>
    <script src="/ModernPythonDevelopment/js/learn.js?1619014998"></script>
    <script src="/ModernPythonDevelopment/js/hugo-learn.js?1619014998"></script>
    
        
            <script src="/ModernPythonDevelopment/mermaid/mermaid.js?1619014998"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

